<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shaurya's AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg: #0f172a;
    --card: rgba(255,255,255,0.05);
    --text: #ffffff;
    --accent: #3b82f6;
}

.light {
    --bg: #f3f4f6;
    --card: rgba(0,0,0,0.05);
    --text: #111827;
    --accent: #2563eb;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    transition: 0.4s;
    overflow: hidden;
}

/* ===== INTRO ===== */
#intro {
    position: fixed;
    width: 100%;
    height: 100%;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 9999;
}

.logo-text {
    font-size: 32px;
    font-weight: 600;
    letter-spacing: 3px;
    animation: fadeIn 1.5s ease;
}

.loading-bar {
    width: 0;
    height: 3px;
    background: var(--accent);
    margin-top: 20px;
    animation: load 3s forwards;
}

@keyframes load {
    from { width: 0; }
    to { width: 220px; }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* ===== LAYOUT ===== */
.container {
    max-width: 500px;
    margin: auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 20px;
}

.header {
    text-align: center;
    font-weight: 600;
    font-size: 22px;
}

.toggle {
    text-align: right;
    cursor: pointer;
    font-size: 14px;
    margin-bottom: 10px;
}

/* ===== ORB ===== */
.orb {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    margin: 10px auto;
    background: radial-gradient(circle at 30% 30%, var(--accent), #000);
    transition: 0.3s;
}

.orb.active {
    transform: scale(1.2);
    box-shadow: 0 0 40px var(--accent);
}

/* ===== CHAT ===== */
.chat {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    background: var(--card);
    border-radius: 15px;
    backdrop-filter: blur(12px);
}

.message {
    margin-bottom: 12px;
    line-height: 1.5;
}

.user { text-align: right; color: var(--accent); }
.bot { text-align: left; }

/* Typing indicator */
.typing span {
    display: inline-block;
    width: 6px;
    height: 6px;
    margin: 2px;
    border-radius: 50%;
    background: var(--text);
    animation: bounce 1s infinite;
}

.typing span:nth-child(2){ animation-delay: 0.2s; }
.typing span:nth-child(3){ animation-delay: 0.4s; }

@keyframes bounce {
    0%, 80%, 100% { transform: scale(0); }
    40% { transform: scale(1); }
}

/* Input */
.input-panel {
    display: flex;
    margin-top: 10px;
}

input {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: var(--card);
    color: var(--text);
    outline: none;
}

button {
    margin-left: 8px;
    padding: 12px;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    color: white;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="intro">
    <div class="logo-text">Shaurya's AI</div>
    <div class="loading-bar"></div>
</div>

<div class="container">
<div class="header">Shaurya's AI</div>
<div class="toggle" onclick="toggleTheme()">Toggle Theme</div>
<div class="orb" id="orb"></div>
<div class="chat" id="chat"></div>

<div class="input-panel">
    <input type="text" id="input" placeholder="Ask something...">
    <button onclick="send()">Send</button>
    <button onclick="startVoice()">ðŸŽ¤</button>
</div>
</div>

<script>

/* ===== INTRO HIDE ===== */
window.addEventListener("load", ()=>{
    setTimeout(()=>{
        document.getElementById("intro").style.opacity="0";
        setTimeout(()=>{
            document.getElementById("intro").style.display="none";
        },500);
    },3000);
});

const chat=document.getElementById("chat");
const input=document.getElementById("input");
const orb=document.getElementById("orb");

/* ===== GREETING DATABASE ===== */
let greetings=["hi","hello","hey","namaste","good morning","good evening"];
for(let i=0;i<1000;i++){
    greetings.push("hi "+i);
    greetings.push("hello "+i);
}
function normalize(t){ return t.toLowerCase().trim(); }
function isGreeting(t){ return greetings.includes(normalize(t)); }

/* ===== MESSAGE ===== */
function addMessage(text,type){
    const msg=document.createElement("div");
    msg.className="message "+type;
    msg.textContent=text;
    chat.appendChild(msg);
    chat.scrollTop=chat.scrollHeight;
}

/* ===== STREAM TEXT ===== */
function streamText(text){
    return new Promise(resolve=>{
        const msg=document.createElement("div");
        msg.className="message bot";
        chat.appendChild(msg);
        let i=0;
        const interval=setInterval(()=>{
            msg.textContent+=text[i];
            i++;
            chat.scrollTop=chat.scrollHeight;
            if(i>=text.length){
                clearInterval(interval);
                resolve();
            }
        },15);
    });
}

/* ===== Typing ===== */
function showTyping(){
    const div=document.createElement("div");
    div.className="message bot";
    div.id="typing";
    div.innerHTML='<div class="typing"><span></span><span></span><span></span></div>';
    chat.appendChild(div);
}
function removeTyping(){
    const t=document.getElementById("typing");
    if(t) t.remove();
}

/* ===== Wikipedia ===== */
async function searchWikipedia(query){
    try{
        const searchUrl=`https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}&format=json&origin=*`;
        const searchRes=await fetch(searchUrl);
        const searchData=await searchRes.json();

        if(!searchData.query.search.length){
            return "No information found.";
        }

        const title=searchData.query.search[0].title;
        const summaryUrl=`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(title)}`;
        const summaryRes=await fetch(summaryUrl);
        const summaryData=await summaryRes.json();

        return summaryData.extract || "No detailed information available.";
    }catch{
        return "Connection error. Use Live Server.";
    }
}

/* ===== SEND ===== */
async function send(){
    const text=input.value.trim();
    if(!text) return;

    addMessage(text,"user");
    input.value="";
    orb.classList.add("active");

    showTyping();

    let response;
    if(isGreeting(text)){
        response="Hello Shaurya. How can I assist you today?";
    }else{
        response=await searchWikipedia(text);
    }

    removeTyping();
    await streamText(response);
    speak(response);
    orb.classList.remove("active");
}

/* ===== VOICE ===== */
function speak(text){
    const utter=new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(utter);
}

function startVoice(){
    const recognition=new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.start();
    orb.classList.add("active");

    recognition.onresult=function(e){
        input.value=e.results[0][0].transcript;
        send();
    };
}

/* ===== ORB REACT ===== */
input.addEventListener("input",()=>{
    if(input.value.length>0) orb.classList.add("active");
    else orb.classList.remove("active");
});

/* ===== THEME ===== */
function toggleTheme(){
    document.body.classList.toggle("light");
}

</script>
</body>
</html>